"use strict";(self.webpackChunkmy_app=self.webpackChunkmy_app||[]).push([[347],{603:function(e,t,n){n(2791);var r=n(7190),o=n(184);t.Z=function(e){var t=function(){var t=(0,r.CG)((function(e){return e.auth}));return(0,o.jsx)(e,{auth:t})},n="withAuthReducerHOC(".concat(e.displayName||e.name||"Component",")");return t.displayName=n,t}},7738:function(e,t,n){n.d(t,{ZP:function(){return pe},E0:function(){return xe},r8:function(){return he},bD:function(){return fe}});var r=n(9439),o=n(3438),s=n(9741),a=n.n(s),i=n(2791),l=n(184),c=(0,i.forwardRef)((function(e,t){var n=(0,i.useState)(!1),s=(0,r.Z)(n,2),c=s[0],u=s[1];(0,i.useImperativeHandle)(t,(function(){return{show:function(){u(!0)},hide:function(){u(!1)}}}));var d="fixed inset-0 flex items-center justify-center z-50  ".concat(c?"visible":"invisible");return(0,l.jsxs)("div",{className:d,children:[(0,l.jsx)("div",{className:"fixed inset-0 bg-white bg-opacity-32 rounded-2xl shadow-md backdrop-blur-lg border border-white border-opacity-45 opacity-75"}),(0,l.jsx)(a(),{animationData:o.Z.catLoading,className:"w-48 h-48"})]})})),u=n(4165),d=n(1413),m=n(5861),f=n(3605),h=n(6314),x=n(848),p=n(9998),g=n(6106),v=n(914),b=n(8974),Z=n(7309),j=n(176),y=n(916),N=n(4746),w=n(6641),P=n(4945),k=n(1118),C=n(1134),S=n(9514),T=n(5439),A=n(7591),I=n(2402),R=n(2339),E=n(3961),L=function(e){var t=e.label,n=(e.value,e.closable),r=e.onClose;return(0,l.jsx)(R.Z,{color:(0,E.m)(),onMouseDown:function(e){e.preventDefault(),e.stopPropagation()},closable:n,className:"mx-2 items-center justify-center",onClose:r,children:t})},O=n(7689),M=i.forwardRef((function(e,t){var n,o=(0,i.useState)(!1),s=(0,r.Z)(o,2),a=s[0],c=s[1],R=(0,A.u3)(),E=(0,r.Z)(R,2),M=E[0],D=E[1],z=(0,A.a)(),q=(0,r.Z)(z,2),U=q[0],H=q[1].isLoading,F=(0,A.Bq)(),B=(0,r.Z)(F,1)[0],_=(0,O.s0)(),G=(0,i.useState)(void 0),Q=(0,r.Z)(G,2),V=Q[0],Y=Q[1],W=(0,i.useState)(),$=(0,r.Z)(W,2),K=$[0],X=$[1],J=(0,A.NL)().data,ee=(0,T.H)(),te=ee.selectedImage,ne=ee.handleImageRemove,re=ee.customRequest,oe=ee.imageUpload,se=(0,C.cI)({resolver:(0,x.F)(I.ec),defaultValues:{title:"",description:"",categories:[]}}),ae=se.handleSubmit,ie=se.control,le=se.formState.errors,ce=se.clearErrors,ue=se.setValue,de=se.reset;(i.useImperativeHandle(t,(function(){return{show:me,hide:fe}})),H)&&(null===(n=xe.current)||void 0===n||n.show());var me=function(e){e?(X(e),null!==e&&void 0!==e&&e.fileName&&(ue("fileName",e.fileName),Y(null===e||void 0===e?void 0:e.fileName)),e.URL&&(ue("URL",null===e||void 0===e?void 0:e.URL),Y(null===e||void 0===e?void 0:e.URL)),ue("title",(null===e||void 0===e?void 0:e.title)||""),ue("description",(null===e||void 0===e?void 0:e.description)||""),ue("categories",(null===e||void 0===e?void 0:e.categories.map((function(e){return e._id})))||[])):(he(),de()),ce(),c(!0)},fe=function(){c(!1),ne()},he=function(){ne(),Y(void 0)},pe=i.useCallback(function(){var e=(0,m.Z)((0,u.Z)().mark((function e(t){var n,r,o;return(0,u.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.prev=0,n=(0,d.Z)({},t),!oe){e.next=7;break}return e.next=5,U(oe).unwrap();case 5:r=e.sent,n=(0,d.Z)((0,d.Z)({},t),{},{fileName:"https://kmaunsplash.s3.ap-southeast-2.amazonaws.com/"+r.key});case 7:if(!K){e.next=15;break}return e.next=10,B({postId:K._id,method:"PATCH",body:t}).unwrap();case 10:e.sent,fe(),(0,S.P)("S\u1eeda b\xe0i vi\u1ebft th\xe0nh c\xf4ng","success"),e.next=20;break;case 15:return e.next=17,M(n).unwrap();case 17:o=e.sent,(0,S.P)("T\u1ea1o b\xe0i vi\u1ebft th\xe0nh c\xf4ng","success"),_("/post/".concat(o._id));case 20:de(),ce(),he(),e.next=28;break;case 25:e.prev=25,e.t0=e.catch(0),(0,S.P)(e.t0.data.message,"error");case 28:case"end":return e.stop()}}),e,null,[[0,25]])})));return function(t){return e.apply(this,arguments)}}(),[oe,K]);return(0,l.jsx)(l.Fragment,{children:(0,l.jsx)(p.Z,{onCancel:fe,open:a,width:880,footer:!1,centered:!0,children:(0,l.jsxs)(g.Z,{children:[(0,l.jsx)(v.Z,{sm:24,xs:12,lg:8,xl:8,className:"item-center justify-center",children:te||V?(0,l.jsxs)("div",{className:"h-full relative",children:[(0,l.jsx)(b.Z,{src:te||V,width:"100%",height:"100%",alt:"Selected",className:"mt-auto object-contain"}),(0,l.jsx)(Z.ZP,{type:"text",className:"absolute top-2 left-2",onClick:he,icon:(0,l.jsx)(f.Z,{})})]}):(0,l.jsxs)("div",{className:"flex flex-col  justify-center items-center",children:[(0,l.jsx)(j.Z.Dragger,{showUploadList:!1,customRequest:re,onRemove:ne,className:"bg-gray-200 border-2 border-dashed border-gray-400 flex-1 rounded-lg p-8 py-40 text-center",children:(0,l.jsxs)(l.Fragment,{children:[(0,l.jsx)(h.Z,{className:"text-4xl mb-4"}),(0,l.jsx)("p",{className:"text-gray-600 text-lg",children:"Drag and drop your files here or click to browse"})]})}),(0,l.jsx)(y.Z.Item,{className:"mb-0",children:(0,l.jsx)(C.Qr,{control:ie,name:"URL",render:function(e){var t,n=e.field;return(0,l.jsx)(k.Z,(0,d.Z)((0,d.Z)({},n),{},{onChange:function(e){n.onChange(e.target.value),Y(e.target.value)},bordered:!1,style:{borderBottom:"1px solid grey",borderRadius:0},className:"text-2xl font-bold tracking-wider border-[2px] pb-2 border-b-[2px]",placeholder:"L\u01b0u t\u1eeb trang",error:null===(t=le.URL)||void 0===t?void 0:t.message}))}})})]})}),(0,l.jsx)(v.Z,{sm:24,xs:12,lg:16,xl:16,className:"h-[34rem]",children:(0,l.jsxs)(y.Z,{className:"w-full h-full px-4 mt-4 flex flex-col",children:[(0,l.jsx)(y.Z.Item,{className:"mb-0",children:(0,l.jsx)(C.Qr,{control:ie,name:"title",render:function(e){var t,n=e.field;return(0,l.jsx)(k.Z,(0,d.Z)((0,d.Z)({},n),{},{bordered:!1,style:{borderBottom:"1px solid grey",borderRadius:0},className:"text-2xl font-bold tracking-wider border-[2px] pb-2 border-b-[2px]",placeholder:"T\u1ea1o ti\xeau \u0111\u1ec1 ",error:null===(t=le.title)||void 0===t?void 0:t.message}))}})}),(0,l.jsx)(y.Z.Item,{children:(0,l.jsx)(C.Qr,{control:ie,name:"description",render:function(e){var t=e.field;return(0,l.jsx)(w.Z,(0,d.Z)((0,d.Z)({maxLength:300},t),{},{bordered:!1,style:{borderBottom:"1px solid grey",borderRadius:0,height:120,resize:"none"},className:"text-md font-bold tracking-wider border-[2px] pb-2 border-b-[2px] mt-12",placeholder:"Cho m\u1ecdi ng\u01b0\u1eddi bi\u1ebft v\u1ec1 b\u1ee9c m\xecnh c\u1ee7a b\u1ea1n nh\xe9 !"}))}})}),J&&(0,l.jsx)(y.Z.Item,{children:(0,l.jsx)(C.Qr,{control:ie,name:"categories",render:function(e){var t=e.field;return(0,l.jsx)(N.Z,(0,d.Z)((0,d.Z)({mode:"multiple",showArrow:!0},t),{},{tagRender:L,autoClearSearchValue:!0,fieldNames:{label:"value",value:"_id"},disabled:!!K,bordered:!1,placeholder:"Ch\u1ecdn danh m\u1ee5c ",style:{borderBottom:"1px solid grey",borderRadius:0,width:"100%"},className:"text-md font-bold tracking-wider mt-12",options:J}))}})}),(0,l.jsx)(y.Z.Item,{style:{marginTop:"auto",marginBottom:"2.25rem"},children:(0,l.jsx)(P.Z,{type:"primary",disabled:!oe&&H&&D.isLoading&&!V,onClick:ae(pe),className:"w-full bg-gray-900",children:K?"S\u1eeda b\xe0i vi\u1ebft":"\u0110\u0103ng B\xe0i"})})]})})]})})})})),D=i.memo(M),z=n(7391),q=n(8624),U=n(732),H=n(6864),F=n(9951),B=n(2278),_=n(1752),G=n(5033),Q=n(3097),V=n(3820),Y=n(4754),W=n(9214),$=n(1082),K=n(3099),X=n(6921),J=n(1431),ee=n(1583),te=n(3388),ne=n(4943),re=n(6413),oe=n(8884),se=n(2426),ae=n.n(se),ie=n(7087),le=n(7190),ce=i.forwardRef((function(e,t){var n=(0,le.CG)((function(e){return e.auth})).user,o=(0,O.s0)(),s=(0,i.useState)(!0),a=(0,r.Z)(s,2),c=a[0],f=(a[1],(0,A.Bq)()),h=(0,r.Z)(f,1)[0],b=(0,A.q9)(),j=(0,r.Z)(b,1)[0],N=(0,i.useState)(!1),w=(0,r.Z)(N,2),P=w[0],T=w[1],L=(0,A.td)(),M=(0,r.Z)(L,2),D=M[0],V=M[1],Y=(V.isLoading,V.isSuccess,(0,i.useState)()),W=(0,r.Z)(Y,2),se=W[0],ce=W[1],me=(0,i.useState)(!1),fe=(0,r.Z)(me,2),xe=fe[0],pe=fe[1],ge=(0,C.cI)({resolver:(0,x.F)(I.O0),defaultValues:{comment:""}}),ve=ge.handleSubmit,be=ge.control,Ze=ge.formState.errors,je=ge.reset,ye=function(){var e=(0,m.Z)((0,u.Z)().mark((function e(t){var r;return(0,u.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.prev=0,!se||!n){e.next=9;break}return e.next=4,j({postId:se._id,body:t}).unwrap();case 4:r=e.sent,ce(r),je(),e.next=10;break;case 9:(0,S.P)("Post not found","error");case 10:return e.abrupt("return");case 13:e.prev=13,e.t0=e.catch(0),(0,S.P)(e.t0.message,"error");case 16:case"end":return e.stop()}}),e,null,[[0,13]])})));return function(t){return e.apply(this,arguments)}}();i.useImperativeHandle(t,(function(){return{show:Ne,hide:we}}));var Ne=function(e){var t;(ce(e),n)&&T(null===e||void 0===e||null===(t=e.likes)||void 0===t?void 0:t.includes(n._id));pe(!0)},we=function(){pe(!1)},Pe=i.useMemo((function(){return(0,l.jsxs)(te.Z,{style:{fontSize:"20px"},children:[(0,l.jsx)(te.Z.Item,{icon:(0,l.jsx)(z.Z,{}),children:"Add to favorites"},"3"),n&&se&&(null===se||void 0===se?void 0:se.user._id)===n._id&&(0,l.jsx)($.Z,{title:"Delete the task",description:"Are you sure to delete this task?",okText:"Yes",onConfirm:(0,m.Z)((0,u.Z)().mark((function e(){return(0,u.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,h({postId:null===se||void 0===se?void 0:se._id,method:"DELETE"}).unwrap();case 3:e.sent,we(),(0,S.P)("Delete Post Success !"),e.next=11;break;case 8:e.prev=8,e.t0=e.catch(0),(0,S.P)(e.t0,"error");case 11:case"end":return e.stop()}}),e,null,[[0,8]])}))),okType:"danger",icon:(0,l.jsx)(q.Z,{style:{color:"red"}}),children:(0,l.jsx)(te.Z.Item,{color:"red",style:{color:"red"},onClick:function(){},icon:(0,l.jsx)(U.Z,{color:"red"}),children:"Delete"},"4")})]})}),[[se]]),ke=i.useCallback((0,m.Z)((0,u.Z)().mark((function e(){var t,r,o,s;return(0,u.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(null===se||void 0===se||!se._id||!n){e.next=12;break}return e.prev=1,e.next=4,D({postId:se._id});case 4:o=e.sent,s=null===(t=o.data)||void 0===t||null===(r=t.likes)||void 0===r?void 0:r.includes(n._id),T(s),e.next=12;break;case 9:e.prev=9,e.t0=e.catch(1),(0,S.P)(e.t0.message,"error");case 12:case"end":return e.stop()}}),e,null,[[1,9]])}))),[null===se||void 0===se?void 0:se._id]),Ce=i.useCallback((function(){o("/post/".concat(null===se||void 0===se?void 0:se._id))}),[null===se||void 0===se?void 0:se._id]);return(0,l.jsx)(p.Z,{onCancel:we,open:xe,width:1280,centered:!0,closable:!1,footer:!1,children:se?(0,l.jsxs)(g.Z,{className:"sm:gap-4 lg:gap-0",children:[(0,l.jsxs)(v.Z,{sm:24,lg:12,className:"sm:max-h-[54rem] lg:h-[92vh] rounded-lg overflow-hidden grid grid-cols-1 place-items-stretch",children:[(0,l.jsx)(ie.LazyLoadImage,{src:(null===se||void 0===se?void 0:se.URL)||(null===se||void 0===se?void 0:se.fileName),alt:se.title,effect:"blur",className:"rounded-lg w-full h-full  "}),(0,l.jsx)(Z.ZP,{type:"primary",shape:"circle",onClick:function(){we()},className:"".concat(de.button," absolute left-4 top-4"),children:(0,l.jsx)(H.Z,{})})]}),(0,l.jsx)(v.Z,{sm:24,lg:12,children:(0,l.jsxs)(g.Z,{className:"h-full sm:pl-0 lg:pl-8",children:[(0,l.jsxs)(v.Z,{sm:24,className:"flex justify-between sticky top-0 left-0 z-10 h-16 bg-white",children:[(0,l.jsxs)(K.Z,{children:[(0,l.jsx)(ee.Z,{overlay:ue,trigger:["click"],placement:"bottomLeft",children:(0,l.jsx)(Z.ZP,{type:"primary",shape:"circle",className:de.button,children:(0,l.jsx)(F.Z,{})})}),(0,l.jsx)(Z.ZP,{type:"primary",shape:"circle",className:"".concat(de.button),onClick:Ce,children:(0,l.jsx)(B.Z,{})}),n&&(0,l.jsx)(Z.ZP,{type:"text",shape:"circle",onClick:ke,className:"".concat(de.button),style:{padding:0},children:(0,l.jsx)(ne.Z,{like:P})}),n&&(null===se||void 0===se?void 0:se.user._id)===n._id&&(0,l.jsx)(Z.ZP,{type:"ghost",shape:"circle",onClick:function(){var e;null===he||void 0===he||null===(e=he.current)||void 0===e||e.show(se),we()},className:"".concat(de.button),children:(0,l.jsx)(_.Z,{})})]}),(0,l.jsx)(K.Z,{children:(0,l.jsx)(ee.Z,{overlay:Pe,trigger:["click"],placement:"bottomRight",children:(0,l.jsx)(Z.ZP,{type:"primary",shape:"circle",className:de.button,children:(0,l.jsx)(G.Z,{})})})})]}),(0,l.jsx)(v.Z,{className:"w-full sm:h-full lg:h-[80vh] overflow-x-hidden lg:overflow-y-auto scrollbar-hide",children:(0,l.jsxs)(g.Z,{gutter:[32,32],children:[(0,l.jsxs)(v.Z,{span:24,children:[(0,l.jsx)(X.Z.Title,{level:2,style:{fontWeight:"700"},children:null===se||void 0===se?void 0:se.title}),(0,l.jsx)(X.Z.Paragraph,{strong:!0,className:"text-lg",children:null===se||void 0===se?void 0:se.description}),se.categories.map((function(e){return(0,l.jsx)(R.Z,{color:(0,E.m)(),onClick:function(){o("/".concat(e.value))},className:"text-base px-2 py-1",children:e.value},e._id)}))]}),(0,l.jsxs)(v.Z,{span:24,className:"flex items-center justify-between",children:[(0,l.jsxs)(K.Z,{children:[se&&se.user?(0,l.jsx)(re.Z,{size:42,user:se.user}):(0,l.jsx)(l.Fragment,{}),(0,l.jsxs)(K.Z,{direction:"vertical",size:2,children:[(0,l.jsx)(X.Z.Text,{strong:!0,className:"text-lg",children:null===se||void 0===se?void 0:se.user.fullName}),(0,l.jsx)(J.Z,{title:ae()(se.createdAt).fromNow(),children:(0,l.jsx)(X.Z.Text,{children:ae()(se.createdAt).fromNow()})})]})]}),c?(0,l.jsx)(Z.ZP,{type:"primary",size:"large",danger:!0,children:"Following"}):(0,l.jsx)(Z.ZP,{type:"primary",size:"large",className:"bg-[#1677ff]",children:"Follow"})]}),n&&(0,l.jsx)(v.Z,{span:24,className:"flex mt-12",children:(0,l.jsxs)("div",{className:"w-full flex  gap-2",children:[(0,l.jsx)(re.Z,{style:{},size:48,user:n}),(0,l.jsx)(y.Z.Item,{className:"w-full",children:(0,l.jsx)(C.Qr,{control:be,name:"comment",render:function(e){var t,n=e.field;return(0,l.jsx)(k.Z,(0,d.Z)((0,d.Z)({},n),{},{placeholder:"Write a comment",className:"grow h-12 rounded-full bg-[#e2e2e2] focus:bg-[white]",error:null===(t=Ze.comment)||void 0===t?void 0:t.message}))}})}),(0,l.jsx)(Z.ZP,{type:"primary",onClick:ve(ye),shape:"circle",className:de.button,children:(0,l.jsx)(Q.Z,{})})]})}),(0,l.jsx)(v.Z,{span:24,className:"grow flex-col justify-between",children:(0,l.jsx)(oe.Z,{comments:se.comments,style:{marginBottom:"auto"}})})]})})]})})]}):(0,l.jsx)(l.Fragment,{})})})),ue=(0,l.jsxs)(te.Z,{children:[(0,l.jsx)(te.Z.Item,{icon:(0,l.jsx)(V.Z,{style:{color:"blue"}}),children:"Facebook"},"1"),(0,l.jsx)(te.Z.Item,{icon:(0,l.jsx)(Y.Z,{style:{color:"blue"}}),children:"Twitter"},"2"),(0,l.jsx)(te.Z.Item,{icon:(0,l.jsx)(W.Z,{style:{color:"red"}}),children:"Gmail"},"3")]}),de={button:"w-12 h-12 leading-3 text-base text-[#111] bg-[#e2e2e2] ",image:" object-center "},me=ce,fe=i.createRef(),he=i.createRef(),xe=i.createRef();var pe=function(){var e=(0,le.CG)((function(e){return e.auth})).isSignedIn;return(0,l.jsxs)(l.Fragment,{children:[e&&(0,l.jsx)(D,{ref:he}),(0,l.jsx)(me,{ref:fe}),(0,l.jsx)(c,{ref:xe})]})}},4943:function(e,t,n){var r=n(2791),o=n(9741),s=n.n(o),a=n(3438),i=n(184);t.Z=function(e){var t=e.like,n=(0,r.useRef)(null);return(0,r.useEffect)((function(){t?(n.current.setDirection(1),n.current.goToAndPlay(n.current.getDuration(),!1)):(n.current.setDirection(-1),n.current.goToAndPlay(0,!0))}),[t]),(0,i.jsx)(s(),{animationData:a.Z.likeAction,lottieRef:n,loop:!1})}},6413:function(e,t,n){var r=n(1413),o=n(4925),s=n(2266),a=(n(2791),n(7689)),i=n(184),l=["user","action","source"];t.Z=function(e){var t=e.user,n=e.action,c=e.source,u=(0,o.Z)(e,l),d=(0,a.s0)();return(0,i.jsx)(s.C,(0,r.Z)((0,r.Z)({src:c||t.avatar,style:u.style||{verticalAlign:"middle",alignSelf:"center"},className:"bg-[#f56a00] ".concat(u.className),size:"large",gap:1,onClick:function(){n?n():d("/profile/".concat(t._id))}},u),{},{children:t.fullName}))}},4945:function(e,t,n){var r,o=n(168),s=n(7309),a=(0,n(2360).ZP)(s.ZP)(r||(r=(0,o.Z)(["\n  width: 100%;\n  height: 3rem;\n"])));t.Z=a},8884:function(e,t,n){var r=n(1413),o=n(4925),s=n(7810),a=n(3254),i=n(1431),l=n(3438),c=n(2426),u=n.n(c),d=(n(2791),n(184)),m=["comments"];t.Z=function(e){var t=e.comments,n=(0,o.Z)(e,m);return(0,d.jsx)(a.ZP,(0,r.Z)((0,r.Z)({className:"comment-list overflow-y-auto",header:"".concat(t.length," replies"),itemLayout:"horizontal",dataSource:t},n),{},{renderItem:function(e){var t,n;return(0,d.jsx)(s.Z,{datetime:(0,d.jsx)(i.Z,{title:u()(e.createdAt).fromNow(),children:(0,d.jsx)("span",{children:u()(e.createdAt).fromNow()})}),className:"text-base",author:null===e||void 0===e||null===(t=e.user)||void 0===t?void 0:t.fullName,avatar:(null===e||void 0===e||null===(n=e.user)||void 0===n?void 0:n.avatar)||l.Z.avatar,content:null===e||void 0===e?void 0:e.comment})}}))}},1118:function(e,t,n){var r=n(1413),o=n(4925),s=(n(2791),n(6921)),a=n(916),i=n(9389),l=n(184),c=["label","error"];t.Z=function(e){var t=e.label,n=e.error,u=(0,o.Z)(e,c);return(0,l.jsxs)(l.Fragment,{children:[t&&(0,l.jsx)(s.Z.Text,{className:"text-base inline-block mb-1 pr-1",strong:!0,children:t}),(0,l.jsx)(a.Z.Item,{className:"flex-column",validateStatus:n?"error":"",help:(0,l.jsx)(s.Z.Text,{type:"danger",children:n}),children:(0,l.jsx)(i.Z,(0,r.Z)({size:"large"},u))})]})}},5439:function(e,t,n){n.d(t,{H:function(){return a}});var r=n(9439),o=n(2791),s=n(9514),a=function(){var e=(0,o.useState)(null),t=(0,r.Z)(e,2),n=t[0],a=t[1],i=(0,o.useState)(void 0),l=(0,r.Z)(i,2),c=l[0],u=l[1];return{selectedImage:n,handleImageRemove:function(){a(null)},customRequest:function(e){var t=e.file;t.type.startsWith("image/")?function(e){var t=new FileReader;t.onload=function(){var n={file:e,size:e.size,mimetype:e.type,originalname:e.name};a(t.result),u(n)},t.readAsDataURL(e)}(t):(0,s.P)("Only image files are allowed.","error")},imageUpload:c}}},9347:function(e,t,n){n.d(t,{Z:function(){return oe}});var r,o,s=n(586),a=n(9439),i=n(2791),l=n(3388),c=n(6921),u=n(7689),d=n(184),m=[{id:1,name:"Nature",icon:"\ud83c\udf3f"},{id:2,name:"Animals",icon:"\ud83d\udc3e"},{id:3,name:"Food",icon:"\ud83c\udf54"},{id:4,name:"Architecture",icon:"\ud83c\udfdb\ufe0f"},{id:5,name:"Travel",icon:"\u2708\ufe0f"},{id:6,name:"Art",icon:"\ud83c\udfa8"},{id:7,name:"Fashion",icon:"\ud83d\udc57"},{id:8,name:"Sports",icon:"\u26bd"},{id:9,name:"Technology",icon:"\ud83d\udcbb"},{id:10,name:"Business",icon:"\ud83d\udcbc"},{id:11,name:"Music",icon:"\ud83c\udfb5"},{id:12,name:"Education",icon:"\ud83d\udcda"},{id:13,name:"Health",icon:"\ud83d\udcaa"},{id:14,name:"People",icon:"\ud83d\udc65"},{id:15,name:"Transportation",icon:"\ud83d\ude97"},{id:16,name:"Space",icon:"\ud83d\ude80"},{id:17,name:"Holiday",icon:"\ud83c\udf81"}],f=function(){var e=(0,u.s0)(),t=i.useState(window.location.pathname.slice(1)),n=(0,a.Z)(t,2),r=n[0],o=n[1];return(0,d.jsx)("div",{className:"category-list antialiased",children:(0,d.jsx)(l.Z,{mode:"horizontal",className:"justify-center",children:m.map((function(t){return(0,d.jsx)(l.Z.Item,{className:"flex-row",icon:t.icon,onClick:function(){!function(t){e("/".concat(t)),o(t)}(t.name)},children:(0,d.jsx)(c.Z.Text,{className:"ml-1 text-md",style:r===t.name?{color:"#1890ff",fontWeight:"800"}:{fontWeight:"500"},children:t.name})},t.name)}))})})},h=function(e){var t=e.children;return(0,d.jsx)("div",{className:" ",children:t})},x=n(168),p=n(4165),g=n(5861),v=n(2266),b=n(1583),Z=n(3438),j=n(6413),y=n(1413),N=n(1730),w=n(8213),P=n(3605),k=n(848),C=n(9389),S=n(3099),T=n(1431),A=n(6106),I=n(914),R=n(8974),E=n(176),L=n(7128),O=n(916),M=n(1243),D=n(4945),z=n(1118),q=n(5439),U=n(9741),H=n.n(U),F=n(7738),B=n(1134),_=n(4942),G=n(6969),Q=n(9514),V=n(2402),Y=window.speechSynthesis,W=i.forwardRef((function(e,t){var n=(0,i.useState)(!1),r=(0,a.Z)(n,2),o=r[0],s=r[1],l=(0,u.s0)(),m=i.useRef(),f=(0,i.useState)(),h=(0,a.Z)(f,2),x=h[0],p=h[1],g=(0,q.H)(),v=g.selectedImage,b=g.handleImageRemove,j=g.customRequest,U=(g.imageUpload,(0,B.cI)({resolver:(0,k.F)(V.dh),defaultValues:{URL:void 0}})),W=(U.handleSubmit,U.control),$=U.formState.errors,K=(U.clearErrors,U.setValue,U.reset,(0,i.useMemo)((function(){return[{id:"1497034825429",url:"https://images.unsplash.com/photo-1583511655857-d19b40a7a54e?ixlib=rb-4.0.3&ixid=M3wxMjA3fDB8MHxzZWFyY2h8MjB8fGRvZ3xlbnwwfHwwfHx8MA%3D%3D&auto=format&fit=crop&w=800&q=60"},{id:"1514888286974",url:"https://images.unsplash.com/photo-1514888286974-6c03e2ca1dba?ixlib=rb-4.0.3&ixid=M3wxMjA3fDB8MHxwaG90by1wYWdlfHx8fGVufDB8fHx8fA%3D%3D&auto=format&fit=crop&w=843&q=80"},{id:"1631947430066",url:"https://images.unsplash.com/photo-1609505848912-b7c3b8b4beda?ixlib=rb-4.0.3&ixid=M3wxMjA3fDB8MHxwaG90by1wYWdlfHx8fGVufDB8fHx8fA%3D%3D&auto=format&fit=crop&w=930&q=80"}]}),[])),X=i.useCallback((function(e){var t=new SpeechSynthesisUtterance("".concat(e)),n=Y.getVoices();t.voice=n[73],Y.speak(t)}),[]),J=i.useCallback((function(){F.E0.current.show();var e=null!==x&&void 0!==x&&x.length?{params:{api_key:"cDzmrh9mOstV1Ho76gEM",image:x}}:{params:{api_key:"cDzmrh9mOstV1Ho76gEM"},data:v};(0,M.Z)((0,y.Z)((0,y.Z)({method:"POST",url:"https://detect.roboflow.com/unsplash-detection/1"},e),{},{headers:{"Content-Type":"application/x-www-form-urlencoded"}})).then((function(e){if(0===e.data.predictions.length)X("Xin l\u1ed7i ch\xfang t\xf4i kh\xf4ng th\u1ec3 t\xecm th\u1ea5y th\xf4ng tin b\u1ea1n \u0111ang y\xeau c\u1ea7u !");else{var t=e.data.predictions[0].class;X("\u0110ang hi\u1ec3n th\u1ecb k\u1ebft qu\u1ea3 t\xecm ki\u1ebfm cho  ".concat(function(e){var t;return(t={},(0,_.Z)(t,G.b.PEOPLE,"M\u1ecdi ng\u01b0\u1eddi"),(0,_.Z)(t,G.b.ANIMALS,"\u0110\u1ed9ng v\u1eadt"),(0,_.Z)(t,G.b.FOOD,"\u0110\u1ed3 \u0103n ngon"),(0,_.Z)(t,G.b.NATURE,"C\u1ea3nh \u0111\u1eb9p"),t)[e]}(t))),setTimeout((function(){l("/".concat(t)),ne()}),2e3)}})).catch((function(e){(0,Q.P)(e.message,"error")})).finally((function(){F.E0.current.hide()}))}),[v,x]),ee=(0,i.useMemo)((function(){return(0,d.jsx)(H(),{animationData:Z.Z.uploadImage,className:"w-64 h-64"})}),[]);i.useImperativeHandle(t,(function(){return{show:te,hide:ne}}));var te=function(){s(!0)},ne=function(){s(!1),p(void 0),b()};return(0,d.jsxs)("div",{className:"w-full relative",onClick:ne,children:[(0,d.jsx)(C.Z,(0,y.Z)({placeholder:"Search high resolution images",maxLength:30,onKeyDown:function(e){var t,n;"Enter"===e.key&&null!==(t=m.current)&&void 0!==t&&null!==(n=t.input)&&void 0!==n&&n.value&&l("/search?q=".concat(m.current.input.value))},min:2,enterKeyHint:!0,prefix:(0,d.jsx)(N.Z,{onClick:function(){var e,t;null!==(e=m.current)&&void 0!==e&&null!==(t=e.input)&&void 0!==t&&t.value&&l("/search?q=".concat(m.current.input.value))}}),ref:m,suffix:(0,d.jsx)(w.Z,{onClick:function(e){te(),e.stopPropagation()}}),className:"w-full p-2 rounded-full px-5 border-[#eee] border"},e)),o&&(0,d.jsxs)(d.Fragment,{children:[(0,d.jsx)("div",{className:"w-[1.6rem] h-[1.6rem] z-50 rotate-45 bg-white border-l border-t solid border-[#ccc]  absolute top-[3.2rem] right-[0.95rem]"}),(0,d.jsxs)("div",{className:"absolute right-0 w-[28rem] h-[32rem] bg-white rounded p-4 border-[#ccc] border-solid border-[1px] z-40 sm:translate-x-1/3 lg:translate-x-0 ",onClick:function(e){e.stopPropagation()},children:[(0,d.jsxs)(S.Z.Compact,{block:!0,className:"h-[2rem] flex justify-between",children:[(0,d.jsx)(c.Z.Title,{level:5,style:{marginBottom:0},children:"Visual Search"}),(0,d.jsx)(T.Z,{placement:"rightBottom",title:"Tha hinh anh vao de tim kiem",children:(0,d.jsx)(c.Z.Text,{type:"secondary",className:"underline",children:"Need help?"})})]}),(0,d.jsx)(A.Z,{className:"h-full  ",children:v||x?(0,d.jsx)(d.Fragment,{children:(0,d.jsxs)(I.Z,{span:24,className:" items-center  justify-center",children:[(0,d.jsx)(S.Z.Compact,{block:!0,className:"rounded-lg overflow-hidden",children:(0,d.jsx)(R.Z,{src:v||x,width:"100%",height:"24rem",className:"object-cover"})}),(0,d.jsxs)(S.Z,{className:" w-full items-center  justify-center  mt-4",children:[(0,d.jsx)(D.Z,{type:"primary",onClick:J,icon:(0,d.jsx)(N.Z,{color:"black",className:"mb-2"}),className:"bg-[#B6D8F2]  justify-center",size:"large",children:"Search out"}),(0,d.jsx)(D.Z,{type:"primary",size:"large",className:"bg-[#F4CFDF]  justify-center",icon:(0,d.jsx)(P.Z,{color:"black",className:"mb-2"}),onClick:function(){p(void 0),b()},children:"Try Again"})]})]})}):(0,d.jsx)(d.Fragment,{children:(0,d.jsxs)(I.Z,{span:24,className:"flex flex-col relative",children:[(0,d.jsx)(E.Z.Dragger,{showUploadList:!1,customRequest:j,onRemove:b,className:"border-2 border-dashed border-gray-400 rounded-lg",children:(0,d.jsxs)("div",{className:"h-64 mx-20 mb-12 relative",children:[ee,(0,d.jsxs)(c.Z.Paragraph,{className:"absolute top-4 w-full text-lg text-center text-gray-600",children:["Drag and drop your files ",(0,d.jsx)("br",{})," here or click to browse"]}),(0,d.jsxs)("div",{className:"absolute -bottom-20 w-full",onClick:function(e){e.stopPropagation()},children:[(0,d.jsx)(L.Z,{children:"Or"}),(0,d.jsx)(O.Z.Item,{children:(0,d.jsx)(B.Qr,{control:W,name:"URL",render:function(e){var t,n=e.field;return(0,d.jsx)(z.Z,(0,y.Z)((0,y.Z)({},n),{},{onChange:function(e){n.onChange(e.target.value),p(e.target.value)},bordered:!1,style:{borderBottom:"1px solid grey",borderRadius:0},className:"text-2xl font-bold tracking-wider border-[2px] pb-2 border-b-[2px]",placeholder:"L\u01b0u t\u1eeb trang",error:null===(t=$.URL)||void 0===t?void 0:t.message}))}})})]})]})}),(0,d.jsx)(c.Z.Paragraph,{className:"text-gray-600 text-center mt-2",children:"Or try one of the examples below:"}),(0,d.jsx)(S.Z,{className:"justify-center",children:K.map((function(e){return(0,d.jsx)(R.Z,{src:e.url,preview:!1,width:80,height:56,className:"object-cover rounded",onClick:function(){return p(e.url)}},e.id)}))})]})})})]}),(0,d.jsx)("div",{className:"fixed top-0 left-0 right-0 bottom-0 z-30",onClick:ne})]})]})})),$=n(603),K=n(712),X=n(5038),J=n(7190),ee=n(2360),te=l.Z.Item;var ne=(0,ee.ZP)(te)(r||(r=(0,x.Z)([""]))),re=(0,$.Z)((0,ee.ZP)((function(e){var t=e.auth,n=(0,u.s0)(),r=t.isSignedIn,o=t.user,s=(0,K.$n)(),c=(0,a.Z)(s,2),m=c[0],f=(c[1],(0,J.TL)()),h=i.useMemo((function(){return(0,d.jsxs)(l.Z,{children:[(0,d.jsx)(l.Z.Item,{onClick:function(){o&&n("/profile/".concat(o._id))},children:"View Profile"},0),(0,d.jsx)(l.Z.Item,{onClick:function(){o&&n("/account")},children:"Account Settings"},1),(0,d.jsx)(l.Z.Item,{onClick:(0,g.Z)((0,p.Z)().mark((function e(){return(0,p.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,m(null).unwrap();case 3:e.sent,f((0,X.w7)()),(0,Q.P)("Log out successfully"),e.next=11;break;case 8:e.prev=8,e.t0=e.catch(0),(0,Q.P)(e.t0.data.message,"error");case 11:case"end":return e.stop()}}),e,null,[[0,8]])}))),children:"Log Out"},2)]})}),[]);return(0,d.jsxs)("div",{className:"flex justify-between items-center gap-3 h-16 ",children:[(0,d.jsx)(v.C,{size:48,style:{},src:Z.Z.loginIcon,className:"shrink-0",onClick:function(){n("/")}}),(0,d.jsx)(W,{}),(0,d.jsxs)(l.Z,{mode:"horizontal",multiple:!0,className:"w-1/4 border-none bg-transparent",children:[(0,d.jsx)(ne,{className:"text-grey-100 font-medium",children:"Explore"},"explore"),r?(0,d.jsx)(ne,{className:"text-grey-100 font-medium border rounded-lg ",onClick:function(){var e;null===F.r8||void 0===F.r8||null===(e=F.r8.current)||void 0===e||e.show()},children:"Submit a photo"},"submit"):(0,d.jsx)(ne,{className:"text-grey-100 font-medium border rounded-lg ",onClick:function(){n("/login")},children:"Log in"},"login")]}),r&&o&&(0,d.jsx)(b.Z,{overlay:h,trigger:["hover"],children:(0,d.jsx)(j.Z,{user:o,className:"shrink-0 my-auto bg-[#f56a00]"})},6)]})}))(o||(o=(0,x.Z)([""])))),oe=function(e){var t=e.children;return(0,d.jsxs)(h,{children:[(0,d.jsxs)(s.Z,{children:[(0,d.jsx)(s.Z.Header,{className:"bg-white shadow-md",children:(0,d.jsx)(re,{})}),(0,d.jsx)(f,{}),(0,d.jsx)(s.Z.Content,{children:t})]}),(0,d.jsx)(F.ZP,{})]})}},6969:function(e,t,n){n.d(t,{b:function(){return r}});var r=function(e){return e.NATURE="Nature",e.ANIMALS="Animals",e.FOOD="Food",e.ARCHITECTURE="Architecture",e.TRAVEL="Travel",e.ART="Art",e.FASHION="Fashion",e.SPORTS="Sports",e.TECHNOLOGY="Technology",e.BUSINESS="Business",e.MUSIC="Music",e.EDUCATION="Education",e.HEALTH="Health",e.PEOPLE="People",e.TRANSPORTATION="Transportation",e.SPACE="Space",e.HOLIDAY="Holiday",e}({})},712:function(e,t,n){n.d(t,{$h:function(){return d},$n:function(){return u},OE:function(){return l},TG:function(){return c},pn:function(){return m},uf:function(){return i}});var r=n(6459),o=n(6571),s="user/",a=o.u.injectEndpoints({endpoints:function(e){return{signUp:e.mutation({query:function(e){return{url:"auth/register",method:"POST",body:e}}}),signIn:e.mutation({query:function(e){return{url:"auth/login",method:"POST",body:e}}}),logOut:e.mutation({query:function(){return{url:"auth/logout",method:"POST"}}}),updateProfile:e.mutation({query:function(e){var t=Object.assign({},((0,r.Z)(e),e));return{url:s,method:"PATCH",body:t}},invalidatesTags:["Profile"],transformErrorResponse:function(e){return e.data}}),changePassword:e.mutation({query:function(e){return{url:"auth/change-password",method:"POST",body:e}},transformErrorResponse:function(e){return e.data}}),getUserProfile:e.query({query:function(e){return{url:s+e}},providesTags:["Profile"]})}},overrideExisting:!0}),i=a.useSignInMutation,l=a.useSignUpMutation,c=a.useUpdateProfileMutation,u=a.useLogOutMutation,d=a.useChangePasswordMutation,m=a.useGetUserProfileQuery},7591:function(e,t,n){n.d(t,{Bq:function(){return Z},NL:function(){return x},Nb:function(){return c},QQ:function(){return d},Y6:function(){return b},_j:function(){return N},a:function(){return h},l0:function(){return w},mD:function(){return v},mE:function(){return u},q9:function(){return y},td:function(){return j},u3:function(){return p},ub:function(){return g},xE:function(){return m}});var r=n(4925),o=n(1413),s=n(6571),a=n(5273),i=["endpointName"],l="post",c=(0,a.createEntityAdapter)({selectId:function(e){return e._id}}),u=(0,a.createEntityAdapter)({selectId:function(e){return e._id}}),d=c.getSelectors(),m=c.getSelectors(),f=s.u.injectEndpoints({endpoints:function(e){return{createPost:e.mutation({query:function(e){return{url:l,method:"POST",body:e}},invalidatesTags:["Posts"]}),uploadImage:e.mutation({query:function(e){return{url:"media/upload",method:"POST",body:e,headers:{"Content-Type":"multipart/form-data"}}}}),getCategories:e.query({query:function(){return{url:"category"}}}),getPostById:e.query({query:function(e){return{url:l+"/"+e}},providesTags:["Posts"]}),getAllPosts:e.query({query:function(e){var t=e.page;return{url:l+"?page=".concat(void 0===t?1:t,"&limit=10")}},transformResponse:function(e,t){return c.addMany(c.getInitialState(),e.posts)},forceRefetch:function(e){var t=e.currentArg,n=e.previousArg;return(null===t||void 0===t?void 0:t.page)!==(null===n||void 0===n?void 0:n.page)},serializeQueryArgs:function(e){return e.endpointName},merge:function(e,t){c.addMany(e,m.selectAll(t))},providesTags:["Posts"]}),getPostByCategory:e.query({query:function(e){var t=e.category;return{url:l+"?category=".concat(t)}},transformResponse:function(e,t){return e.posts},providesTags:["Posts"]}),getUserPosts:e.query({query:function(e){return{url:"post/user/"+e}},transformResponse:function(e,t){return e.posts},providesTags:["Posts"]}),updatePost:e.mutation({query:function(e){var t=e.postId,n=e.method,r=e.body;return{url:l+"/"+t,method:n,body:r}},onCacheEntryAdded:function(e,t){var n=e.postId,r=e.method,s=e.body,a=t.dispatch;"DELETE"===r?a(f.util.updateQueryData("getAllPosts",{page:1},(function(e){c.removeOne(e,n)}))):s&&"PATCH"===r&&a(f.util.updateQueryData("getAllPosts",{page:1},(function(e){c.updateOne(e,{id:n,changes:(0,o.Z)((0,o.Z)({},e.entities[n]),s)})})))},invalidatesTags:["Posts"]}),likePost:e.mutation({query:function(e){var t=e.postId;return{url:l+"/"+t+"/like",method:"POST"}},invalidatesTags:["Posts"]}),commentPost:e.mutation({query:function(e){var t=e.postId,n=e.body;return{url:l+"/"+t+"/comment",method:"POST",body:n}},invalidatesTags:["Posts"]}),getPostSearch:e.query({query:function(e){var t=e.page,n=void 0===t?1:t,r=e.search;return{url:"post/search"+"?page=".concat(n,"&limit=10&keyword=").concat(r)}},transformResponse:function(e,t){return u.addMany(u.getInitialState(),e.posts)},forceRefetch:function(e){var t=e.currentArg,n=e.previousArg;return(null===t||void 0===t?void 0:t.page)!==(null===n||void 0===n?void 0:n.page)||(null===t||void 0===t?void 0:t.search)!==(null===n||void 0===n?void 0:n.search)},serializeQueryArgs:function(e){return e.endpointName+":"+(0,r.Z)(e,i).queryArgs.search},merge:function(e,t){u.addMany(e,d.selectAll(t))},providesTags:["Posts"]})}},overrideExisting:!0}),h=f.useUploadImageMutation,x=f.useGetCategoriesQuery,p=f.useCreatePostMutation,g=f.useGetPostByCategoryQuery,v=f.useGetAllPostsQuery,b=f.useGetUserPostsQuery,Z=f.useUpdatePostMutation,j=f.useLikePostMutation,y=f.useCommentPostMutation,N=f.useGetPostByIdQuery,w=f.useGetPostSearchQuery},3961:function(e,t,n){n.d(t,{m:function(){return o}});var r=n(6969),o=function(){for(var e="#",t=0;t<6;t++)e+="0123456789ABCDEF"[Math.floor(16*Math.random())];return e};r.b.NATURE,r.b.ANIMALS,r.b.FOOD,r.b.ARCHITECTURE,r.b.TRAVEL,r.b.ART,r.b.FASHION,r.b.SPORTS,r.b.TECHNOLOGY,r.b.BUSINESS,r.b.MUSIC,r.b.EDUCATION,r.b.HEALTH,r.b.PEOPLE,r.b.TRANSPORTATION,r.b.SPACE,r.b.HOLIDAY},9514:function(e,t,n){n.d(t,{P:function(){return o}});var r=n(9085),o=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"success",n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"bottom-right",o=arguments.length>3?arguments[3]:void 0;(0,r.Am)(e,{position:n,className:o,type:t})}},2402:function(e,t,n){n.d(t,{O0:function(){return s},dh:function(){return a},ec:function(){return o}});var r=n(874),o=r.z.object({title:r.z.string().min(2,{message:"Must be 2 or more characters long"}).max(100,{message:"Must be 100 or less characters long"}),description:r.z.string().max(250,{message:"Exceeds Character Limit! Maximum 250 charaters"}),categories:r.z.string().array().default([]),URL:r.z.optional(r.z.string().min(2,{message:"Invalid URL"})),fileName:r.z.optional(r.z.string())}),s=r.z.object({comment:r.z.string().min(2,{message:"Must be 2 or more characters long"}).max(250,{message:"Exceeds Character Limit! Maximum 250 charaters"})}),a=r.z.object({URL:r.z.optional(r.z.string().min(2,{message:"Invalid URL"}))})}}]);
//# sourceMappingURL=347.b5b0e8cb.chunk.js.map